<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>醇萃茶研 - 互動飲品選單</title>
    <!-- Tailwind CSS for layout and utilities -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@500;700&family=Noto+Sans+TC:wght@300;400;700&display=swap');

        :root {
            --primary-black: #4a2c2a;
            --primary-lemon: #eab308;
            --accent: #84cc16;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8f7f2;
            transition: background-color 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-x: hidden;
        }

        .serif {
            font-family: 'Noto Serif TC', serif;
        }

        .drink-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 2rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.05);
            transition: all 0.5s ease;
        }

        .drink-image-container {
            width: 220px;
            height: 220px;
            border-radius: 50%;
            margin: 0 auto;
            position: relative;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            overflow: hidden;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #drink-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.4s ease;
        }

        .drink-image-container::after {
            content: '';
            position: absolute;
            inset: -5px;
            border: 2px dashed #ccc;
            border-radius: 50%;
            animation: rotate 25s linear infinite;
            pointer-events: none;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .option-chip {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-chip.active {
            background: var(--primary-black);
            color: white;
            border-color: var(--primary-black);
        }

        .floating {
            animation: floating 4s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }

        /* 購物車側欄 */
        #cart-sidebar {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
        }

        .cart-open #cart-sidebar {
            transform: translateX(0);
        }

        .cart-closed #cart-sidebar {
            transform: translateX(100%);
        }

        #cart-overlay {
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(4px);
            transition: opacity 0.3s;
            z-index: 90;
        }

        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6 cart-closed">

    <!-- 購物車按鈕 (浮動) -->
    <button onclick="toggleCart(true)" class="fixed top-6 right-6 z-50 bg-white p-4 rounded-full shadow-xl hover:scale-110 transition-transform flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-stone-800" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg>
        <span id="cart-count" class="bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full">0</span>
    </button>

    <!-- 購物車側欄 -->
    <div id="cart-overlay" class="fixed inset-0 opacity-0 pointer-events-none" onclick="toggleCart(false)"></div>
    <div id="cart-sidebar" class="fixed top-0 right-0 h-full w-80 bg-white shadow-2xl p-6 flex flex-col translate-x-full">
        <div class="flex justify-between items-center mb-6">
            <h3 class="serif text-xl font-bold">購物清單</h3>
            <button onclick="toggleCart(false)" class="text-stone-400 hover:text-black">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        
        <div id="cart-items" class="flex-grow overflow-y-auto space-y-4 pr-2">
            <!-- 購物車項目將動態加入此處 -->
        </div>

        <div class="mt-6 pt-6 border-t border-stone-100">
            <div class="flex justify-between mb-4">
                <span class="text-stone-500">總金額</span>
                <span id="cart-total" class="text-xl font-bold text-stone-800">$0</span>
            </div>
            <button class="w-full py-4 bg-stone-800 text-white rounded-xl font-bold hover:bg-black transition-colors">
                前往結帳
            </button>
        </div>
    </div>

    <!-- 主卡片 -->
    <div class="max-w-md w-full drink-card p-8 relative overflow-hidden">
        <header class="text-center mb-6 relative z-10">
            <h1 id="brand-title" class="serif text-3xl font-bold text-stone-800 mb-2">醇萃茶研</h1>
            <p class="text-stone-400 text-sm tracking-widest uppercase">Pure Tea Research Lab</p>
        </header>

        <div class="relative mb-8 text-center">
            <div id="drink-container" class="drink-image-container mb-6 floating">
                <img id="drink-img" src="" alt="[飲品圖片]" class="opacity-100" onerror="this.src='https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?q=80&w=600&auto=format&fit=crop'">
            </div>
            
            <div class="min-h-[100px]">
                <h2 id="drink-name" class="serif text-2xl font-bold text-stone-700 mb-2">歡迎品鑑</h2>
                <p id="drink-desc" class="text-stone-500 leading-relaxed text-sm px-4">
                    請從下方挑選您感興趣的茶飲，我們將為您呈現最真實的風味縮影。
                </p>
            </div>
        </div>

        <!-- 選擇切換 -->
        <div class="grid grid-cols-2 gap-4 mb-8">
            <button id="btn-black" onclick="changeDrink('black')" class="py-4 px-2 rounded-xl bg-[#8B4513] text-white shadow-lg flex flex-col items-center active:scale-95 transition-transform">
                <span class="text-xs opacity-80 mb-1">Classic</span>
                <span class="font-bold">經典紅茶</span>
            </button>
            <button id="btn-lemon" onclick="changeDrink('lemon')" class="py-4 px-2 rounded-xl bg-[#eab308] text-white shadow-lg flex flex-col items-center active:scale-95 transition-transform">
                <span class="text-xs opacity-80 mb-1">Fresh</span>
                <span class="font-bold">招牌檸檬紅</span>
            </button>
        </div>

        <!-- 客製化選項 -->
        <div id="custom-ui" class="space-y-4 opacity-0 transition-opacity duration-500 pointer-events-none">
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-xs font-bold text-stone-400 mb-2 uppercase tracking-tighter">甜度</label>
                    <div class="flex flex-wrap gap-1" id="sugar-options">
                        <span class="option-chip active" onclick="selectChip(this)">五分糖</span>
                        <span class="option-chip" onclick="selectChip(this)">八分糖</span>
                    </div>
                </div>
                <div>
                    <label class="block text-xs font-bold text-stone-400 mb-2 uppercase tracking-tighter">冰塊</label>
                    <div class="flex flex-wrap gap-1" id="ice-options">
                        <span class="option-chip active" onclick="selectChip(this)">微冰</span>
                        <span class="option-chip" onclick="selectChip(this)">少冰</span>
                    </div>
                </div>
            </div>

            <button id="add-to-cart-btn" class="w-full mt-6 py-4 bg-stone-800 text-white rounded-2xl font-bold tracking-widest hover:bg-black transition-all flex items-center justify-center gap-2">
                <span>加入購物車</span>
            </button>
        </div>
    </div>

    <div id="toast" class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-black text-white px-6 py-3 rounded-full text-sm opacity-0 transition-all duration-300 pointer-events-none shadow-2xl z-[110]">
        已成功加入購物清單
    </div>

    <script>
        let cart = [];
        let currentType = null;

        const drinkData = {
            black: {
                title: "經典紅茶",
                price: 50,
                imgUrl: "https://images.unsplash.com/photo-1597481499750-3e6b22637e12?q=80&w=600&auto=format&fit=crop",
                bgColor: "#fdf2f2",
                accent: "#8B4513"
            },
            lemon: {
                title: "招牌檸檬紅",
                price: 60,
                // 充滿夏日清爽感的檸檬紅茶圖片
                imgUrl: "https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?q=80&w=600&auto=format&fit=crop",
                bgColor: "#fefce8",
                accent: "#ca8a04"
            }
        };

        window.addEventListener('DOMContentLoaded', () => {
            updateCartUI();
            changeDrink('black');
        });

        window.changeDrink = function(type) {
            currentType = type;
            const data = drinkData[type];
            const imgElement = document.getElementById('drink-img');
            
            document.getElementById('btn-black').style.transform = type === 'black' ? 'scale(1.05)' : 'scale(1)';
            document.getElementById('btn-lemon').style.transform = type === 'lemon' ? 'scale(1.05)' : 'scale(1)';
            
            imgElement.style.opacity = '0';
            setTimeout(() => {
                imgElement.src = data.imgUrl;
                document.body.style.backgroundColor = data.bgColor;
                document.getElementById('drink-name').innerText = data.title;
                document.getElementById('drink-name').style.color = data.accent;
                document.getElementById('brand-title').style.color = data.accent;
                document.getElementById('add-to-cart-btn').innerText = `加入購物車 (NT$ ${data.price})`;
                imgElement.style.opacity = '1';
                
                const customUI = document.getElementById('custom-ui');
                customUI.classList.remove('opacity-0', 'pointer-events-none');
                customUI.classList.add('opacity-100');
            }, 50);
        };

        window.selectChip = function(el) {
            const siblings = el.parentElement.querySelectorAll('.option-chip');
            siblings.forEach(s => s.classList.remove('active'));
            el.classList.add('active');
        };

        window.toggleCart = function(open) {
            const body = document.body;
            const overlay = document.getElementById('cart-overlay');
            if (open) {
                body.classList.remove('cart-closed');
                body.classList.add('cart-open');
                overlay.classList.remove('opacity-0', 'pointer-events-none');
                overlay.classList.add('opacity-100');
            } else {
                body.classList.remove('cart-open');
                body.classList.add('cart-closed');
                overlay.classList.add('opacity-0', 'pointer-events-none');
                overlay.classList.remove('opacity-100');
            }
        };

        document.getElementById('add-to-cart-btn').addEventListener('click', () => {
            if (!currentType) return;
            const data = drinkData[currentType];
            const sugar = document.querySelector('#sugar-options .active').innerText;
            const ice = document.querySelector('#ice-options .active').innerText;
            
            const existingItem = cart.find(item => 
                item.name === data.title && 
                item.sugar === sugar && 
                item.ice === ice
            );

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: Date.now() + Math.random(),
                    name: data.title,
                    price: data.price,
                    sugar: sugar,
                    ice: ice,
                    quantity: 1
                });
            }

            updateCartUI();
            showToast();
        });

        function updateCartUI() {
            const container = document.getElementById('cart-items');
            const countEl = document.getElementById('cart-count');
            const totalEl = document.getElementById('cart-total');

            if (!container || !countEl || !totalEl) return;

            const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
            countEl.innerText = totalQuantity;
            
            container.innerHTML = '';
            
            if (cart.length === 0) {
                const emptyMsg = document.createElement('p');
                emptyMsg.className = 'text-center text-stone-400 py-10';
                emptyMsg.innerText = '購物車是空的';
                container.appendChild(emptyMsg);
                totalEl.innerText = `$0`;
                return;
            }

            let totalPrice = 0;
            cart.forEach(item => {
                const subtotal = item.price * item.quantity;
                totalPrice += subtotal;
                
                const div = document.createElement('div');
                div.className = 'bg-stone-50 p-4 rounded-xl flex justify-between items-center animate-fade-in';
                div.innerHTML = `
                    <div class="flex-grow">
                        <div class="flex items-center gap-2">
                            <p class="font-bold text-stone-800">${item.name}</p>
                            <span class="text-xs bg-stone-200 text-stone-600 px-2 py-0.5 rounded-full font-bold">x ${item.quantity}</span>
                        </div>
                        <p class="text-xs text-stone-400">${item.sugar} / ${item.ice}</p>
                        <p class="text-sm font-bold text-stone-600 mt-1">$${subtotal}</p>
                    </div>
                    <button onclick="removeItem(${item.id})" class="text-red-300 hover:text-red-500 p-2 transition-colors ml-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                    </button>
                `;
                container.appendChild(div);
            });

            totalEl.innerText = `$${totalPrice}`;
        }

        window.removeItem = function(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartUI();
        };

        function showToast() {
            const toast = document.getElementById('toast');
            if (!toast) return;
            toast.classList.remove('opacity-0', 'translate-y-4');
            toast.classList.add('opacity-100', '-translate-y-2');
            
            setTimeout(() => {
                toast.classList.add('opacity-0', 'translate-y-4');
                toast.classList.remove('opacity-100', '-translate-y-2');
            }, 2000);
        }
    </script>
</body>
</html>